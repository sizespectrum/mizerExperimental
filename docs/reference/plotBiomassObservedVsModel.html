<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plotting simulated vs. observed biomass data — plotBiomassObservedVsModel • mizerExperimental</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Plotting simulated vs. observed biomass data — plotBiomassObservedVsModel" />
<meta property="og:description" content="Given a MizerParams object or MizerSIm object object for which biomass
observations are available for at least some species via
species_params(params)$biomass_observed, this function plots the total
biomass by species against the provided biomass observation values." />
<meta property="og:image" content="https://sizespectrum.org/mizerExperimental/reference/figures/logo.png" />
<meta property="og:image:alt" content="mizerExperimental: New features for mizer" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="@mizer_model" />
<meta name="twitter:site" content="@mizer_model" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mizerExperimental</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.1.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/first_multispecies_model.html">A first multi-species size-spectrum model</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://blog.mizer.sizespectrum.org">Blog</a>
</li>
<li>
  <a href="https://twitter.com/mizer_model">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/sizespectrum/mizerExperimental/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plotting simulated vs. observed biomass data</h1>
    <small class="dont-index">Source: <a href='https://github.com/sizespectrum/mizerExperimental/blob/master/R/plotBiomassObservedVsModel.R'><code>R/plotBiomassObservedVsModel.R</code></a></small>
    <div class="hidden name"><code>plotBiomassObservedVsModel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given a MizerParams object or MizerSIm object <code>object</code> for which biomass
observations are available for at least some species via
<code>species_params(params)$biomass_observed</code>, this function plots the total
biomass by species against the provided biomass observation values.</p>
    </div>

    <pre class="usage"><span class='fu'>plotBiomassObservedVsModel</span><span class='op'>(</span>
  <span class='va'>object</span>,
  species <span class='op'>=</span> <span class='cn'>NULL</span>,
  fraction <span class='op'>=</span> <span class='cn'>FALSE</span>,
  log_scale <span class='op'>=</span> <span class='cn'>TRUE</span>,
  return_data <span class='op'>=</span> <span class='cn'>FALSE</span>,
  labels <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class MizerParams or
MizerSim.</p></td>
    </tr>
    <tr>
      <th>species</th>
      <td><p>The species to be affected. Optional. By default all observed
biomasses will be matched. A vector of species names, or a numeric vector
with the species indices, or a logical vector indicating for each species
whether it is to be affected (TRUE) or not.</p></td>
    </tr>
    <tr>
      <th>fraction</th>
      <td><p>Whether to plot the Pearson correlation (FALSE) or the
fraction of biomass (TRUE). Default is FALSE.</p></td>
    </tr>
    <tr>
      <th>log_scale</th>
      <td><p>If using the Pearson coefficient plot, whether to plot on
the log10 scale (TRUE) or not (FALSE). Default is TRUE.</p></td>
    </tr>
    <tr>
      <th>return_data</th>
      <td><p>Whether to return the data frame for the plot (TRUE) or
not (FALSE). Default is FALSE</p></td>
    </tr>
    <tr>
      <th>labels</th>
      <td><p>Whether to show text labels for each species (TRUE) or not
(FALSE). Default is TRUE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A plot of the simulated biomass by species compared to observed
biomass.</p>
<p>The dataframe which creates the plot. Default is FALSE.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For mizerParams objects, the initial biomass of species will be compared to
the observed biomasses - unless the initial biomasses have been carefully
calibrated we would not expect these to be close. For mizerSim objects, the
final biomasses of the species will be compared to the observed biomasses.</p>
<p>Make sure that, for species which have no observed biomass,
<code>biomass_observed</code> for these species are set as 0 or NA.</p>
<p>Observed biomasses usually only include individuals above a certain size.
This size should either be specified in
<code>species_params(params)$biomass_cutoff</code> in grams, or else all sizes are
included.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>ns_params</span> <span class='op'>&lt;-</span> <span class='fu'>newMultispeciesParams</span><span class='op'>(</span><span class='va'>NS_species_params_gears</span>, <span class='va'>inter</span><span class='op'>)</span> <span class='co'># the species parameters and interaction matrix</span>
</div><div class='output co'>#&gt; <span class='message'>No h provided for some species, so using f0 and k_vb to calculate it.</span>
#&gt; <span class='message'>No ks column so calculating from critical feeding level.</span>
#&gt; <span class='message'>Using z0 = z0pre * w_max ^ z0exp for missing z0 values.</span></div><div class='input'><span class='va'>ns_sim</span> <span class='op'>&lt;-</span> <span class='fu'>project</span><span class='op'>(</span><span class='va'>ns_params</span>, t_max <span class='op'>=</span> <span class='fl'>100</span>, progress_bar <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>end_biomass</span> <span class='op'>&lt;-</span> <span class='fu'>getBiomass</span><span class='op'>(</span><span class='va'>ns_sim</span><span class='op'>)</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>ns_sim</span><span class='op'>@</span><span class='va'>n</span><span class='op'>)</span>, <span class='op'>]</span> <span class='co'># biomass at steady state</span>
<span class='va'>vary_biomass</span> <span class='op'>&lt;-</span> <span class='va'>end_biomass</span><span class='op'>*</span><span class='op'>(</span><span class='fl'>0.75</span><span class='op'>+</span><span class='fl'>0.5</span><span class='op'>*</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>ns_params</span><span class='op'>@</span><span class='va'>interaction</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># shift biomasses a bit</span>
<span class='co'># Check that works for the params object</span>
<span class='fu'>species_params</span><span class='op'>(</span><span class='va'>ns_params</span><span class='op'>)</span><span class='op'>$</span><span class='va'>biomass_observed</span> <span class='op'>&lt;-</span> <span class='va'>vary_biomass</span> <span class='co'># read into ns_params object</span>
<span class='fu'>plotBiomassObservedVsModel</span><span class='op'>(</span><span class='va'>ns_params</span><span class='op'>)</span>
</div><div class='img'><img src='plotBiomassObservedVsModel-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># Check that works for the sim object</span>
<span class='fu'>species_params</span><span class='op'>(</span><span class='va'>ns_sim</span><span class='op'>@</span><span class='va'>params</span><span class='op'>)</span><span class='op'>$</span><span class='va'>biomass_observed</span> <span class='op'>&lt;-</span> <span class='va'>vary_biomass</span>
<span class='fu'>plotBiomassObservedVsModel</span><span class='op'>(</span><span class='va'>ns_sim</span><span class='op'>)</span>
</div><div class='img'><img src='plotBiomassObservedVsModel-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>plotBiomassObservedVsModel</span><span class='op'>(</span><span class='va'>ns_sim</span>, log_scale <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span>
</div><div class='img'><img src='plotBiomassObservedVsModel-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>plotBiomassObservedVsModel</span><span class='op'>(</span><span class='va'>ns_sim</span>, fraction <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
</div><div class='img'><img src='plotBiomassObservedVsModel-4.png' alt='' width='700' height='433' /></div><div class='input'><span class='va'>test</span> <span class='op'>=</span> <span class='fu'>plotBiomassObservedVsModel</span><span class='op'>(</span><span class='va'>ns_sim</span>, fraction <span class='op'>=</span> <span class='cn'>T</span>, return_data <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
</div><div class='img'><img src='plotBiomassObservedVsModel-5.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gustav Delius.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


